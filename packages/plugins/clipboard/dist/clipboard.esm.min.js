var A={copyHeaders:!0,shortcuts:!0},v={name:"clipboard",init(L){let{eventBus:l,table:t,options:P}=L;if(!t){console.error("ClipboardPlugin: table is undefined");return}let C={...A,...P},f=null;function d(e=!0){let i=t.getState().columns||[],o;if(e?(o=t.getSelected?t.getSelected():[],console.log("[Clipboard] Copying selected rows:",o.length)):(o=t.getFilteredData?t.getFilteredData():[],console.log("[Clipboard] Copying all rows:",o.length)),!o||o.length===0)return console.warn("[Clipboard] No data to copy - select some rows first!"),!1;let r=[];if(C.copyHeaders){let a=i.map(u=>u.header||u.id).join("	");r.push(a)}for(let a of o){let u=i.map(y=>{let g=a[y.field||y.id];return g==null?"":String(g).replace(/\t/g," ").replace(/\n/g," ")});r.push(u.join("	"))}let p=r.join(`
`);return navigator.clipboard.writeText(p).then(()=>{console.log("[Clipboard] Copied to clipboard!"),l&&l.emit&&l.emit("clipboard:copy",{count:o.length,text:p})}).catch(a=>{console.error("[Clipboard] Failed to copy:",a)}),!0}function m(){navigator.clipboard.readText().then(e=>{if(!e||!e.trim()){console.log("[Clipboard] Nothing to paste");return}let i=t.getState().columns||[],o=e.trim().split(`
`),r=[],p=0,a=o[0].split("	");i.every((n,h)=>{let c=n.header||n.id;return a[h]&&a[h].trim().toLowerCase()===c.toLowerCase()})&&(p=1,console.log("[Clipboard] Detected header row, skipping"));for(let n=p;n<o.length;n++){let h=o[n].split("	"),c={};i.forEach((b,k)=>{let x=b.field||b.id,s=h[k]||"";if(b.type==="number"){let D=parseFloat(s.replace(/,/g,""));s=isNaN(D)?0:D}else b.type==="boolean"&&(s=s.toLowerCase()==="true"||s==="1"||s==="\u2713");c[x]=s}),c.id||(c.id=`pasted_${Date.now()}_${n}`),r.push(c)}if(console.log("[Clipboard] Parsed rows to paste:",r.length),r.length===0){console.log("[Clipboard] No valid rows to paste");return}let g=[...t.getData?t.getData():[],...r];t.setData&&(t.setData(g),console.log("[Clipboard] Added",r.length,"rows to table")),l&&l.emit&&l.emit("clipboard:paste",{rows:r,count:r.length,text:e})}).catch(e=>{console.error("[Clipboard] Failed to paste:",e)})}return C.shortcuts&&(f=e=>{if(!(navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey))return;let o=e.key.toLowerCase();if(o==="c"&&!e.shiftKey){e.preventDefault(),e.stopPropagation(),console.log("[Clipboard] Copy triggered"),d(!0);return}if(o==="v"&&!e.shiftKey){if(e.target.matches("input, textarea, select, [contenteditable]"))return;e.preventDefault(),e.stopPropagation(),console.log("[Clipboard] Paste triggered"),m();return}},document.addEventListener("keydown",f,!0)),t.copy=d,t.paste=m,t.copyAll=()=>d(!1),{name:"clipboard",copy:d,paste:m,copyAll:()=>d(!1),destroy(){f&&document.removeEventListener("keydown",f,!0),delete t.copy,delete t.paste,delete t.copyAll}}}};export{v as ClipboardPlugin,v as default};
