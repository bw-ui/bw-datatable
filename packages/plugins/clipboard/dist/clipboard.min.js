var BWClipboard=(()=>{var D=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var j=Object.getOwnPropertyNames;var O=Object.prototype.hasOwnProperty;var H=(o,r)=>{for(var a in r)D(o,a,{get:r[a],enumerable:!0})},I=(o,r,a,h)=>{if(r&&typeof r=="object"||typeof r=="function")for(let g of j(r))!O.call(o,g)&&g!==a&&D(o,g,{get:()=>r[g],enumerable:!(h=_(r,g))||h.enumerable});return o};var N=o=>I(D({},"__esModule",{value:!0}),o);var V={};H(V,{ClipboardPlugin:()=>M,default:()=>M});var R={shortcuts:!0,copyHeaders:!1,pasteMode:"replace"},M={name:"clipboard",init(o){let{eventBus:r,table:a,getState:h,options:g}=o,P={...R,...g},v=null;function L(e,d){let t=d.field||d.id,n;return t.includes(".")?n=t.split(".").reduce((c,p)=>c?.[p],e):n=e[t],n==null?"":String(n)}function T(e){return e.trim().split(/\r?\n/).map(t=>t.split("	"))}async function k(e={}){let d={...P,...e},t=a.getSelected();if(t.length===0)return console.warn("ClipboardPlugin: No rows selected"),!1;let n=a.getVisibleColumns(),c=[];if(d.copyHeaders){let y=n.map(l=>l.header||l.id);c.push(y.join("	"))}t.forEach(y=>{let l=n.map(u=>L(y,u));c.push(l.join("	"))});let p=c.join(`
`);try{return await navigator.clipboard.writeText(p),r.emit("clipboard:copy",{rowCount:t.length,content:p}),!0}catch(y){return console.error("ClipboardPlugin: Copy failed",y),!1}}async function x(e={}){let d={...P,...e},t;try{t=await navigator.clipboard.readText()}catch(m){return console.error("ClipboardPlugin: Paste failed - clipboard access denied",m),!1}if(!t.trim())return console.warn("ClipboardPlugin: Clipboard is empty"),!1;let n=T(t),c=a.getVisibleColumns(),p=h();if(r.emit("clipboard:before-paste",{parsedRows:n,columns:c})===!1)return!1;let l=n.map(m=>{let f={};return c.forEach((b,E)=>{if(E<m.length){let S=b.field||b.id,i=m[E];if(b.type==="number"){let s=parseFloat(i);i=isNaN(s)?i:s}else if(b.type==="boolean"){let s=i.toLowerCase();(s==="true"||s==="false"||i==="1"||i==="0"||i==="\u2713")&&(i=s==="true"||i==="1"||i==="\u2713")}if(S.includes(".")){let s=S.split("."),w=f;for(let C=0;C<s.length-1;C++)w[s[C]]=w[s[C]]||{},w=w[s[C]];w[s[s.length-1]]=i}else f[S]=i}}),f.id||(f.id=`paste_${Date.now()}_${Math.random().toString(36).slice(2,9)}`),f}),u;if(d.pasteMode==="append")u=[...p.data,...l];else{let m=new Set(a.getSelectedIds());m.size>0?(u=p.data.filter(f=>{let b=f.id||f.__bw_id;return!m.has(String(b))}),u=[...u,...l]):u=[...p.data,...l]}return a.setData(u),r.emit("clipboard:paste",{rowCount:l.length,rows:l,mode:d.pasteMode}),!0}return P.shortcuts&&(v=e=>{if(e.target.matches("input, textarea, select")||!(navigator.platform.toUpperCase().indexOf("MAC")>=0?e.metaKey:e.ctrlKey))return;let n=e.key.toLowerCase();if(n==="c"||e.keyCode===67){e.preventDefault(),e.stopPropagation(),setTimeout(()=>k(),10);return}if(n==="v"||e.keyCode===86){e.preventDefault(),e.stopPropagation(),x();return}},document.addEventListener("keydown",v,!0)),a.copy=k,a.paste=x,{copy:k,paste:x,destroy(){v&&document.removeEventListener("keydown",v,!0)}}},destroy(o){o&&typeof o.destroy=="function"&&o.destroy()}};return N(V);})();
BWClipboard=BWClipboard.ClipboardPlugin;
