var BWClipboard=(()=>{var v=Object.defineProperty;var F=Object.getOwnPropertyDescriptor;var S=Object.getOwnPropertyNames;var M=Object.prototype.hasOwnProperty;var N=(n,o)=>{for(var e in o)v(n,e,{get:o[e],enumerable:!0})},E=(n,o,e,b)=>{if(o&&typeof o=="object"||typeof o=="function")for(let l of S(o))!M.call(n,l)&&l!==e&&v(n,l,{get:()=>o[l],enumerable:!(b=F(o,l))||b.enumerable});return n};var K=n=>E(v({},"__esModule",{value:!0}),n);var H={};N(H,{ClipboardPlugin:()=>L,default:()=>L});var j={copyHeaders:!0,shortcuts:!0},L={name:"clipboard",init(n){let{eventBus:o,table:e,options:b}=n;if(!e){console.error("ClipboardPlugin: table is undefined");return}let l={...j,...b},m=null;function u(t=!0){let d=e.getState().columns||[],r;if(t?(r=e.getSelected?e.getSelected():[],console.log("[Clipboard] Copying selected rows:",r.length)):(r=e.getFilteredData?e.getFilteredData():[],console.log("[Clipboard] Copying all rows:",r.length)),!r||r.length===0)return console.warn("[Clipboard] No data to copy - select some rows first!"),!1;let a=[];if(l.copyHeaders){let s=d.map(f=>f.header||f.id).join("	");a.push(s)}for(let s of r){let f=d.map(D=>{let h=s[D.field||D.id];return h==null?"":String(h).replace(/\t/g," ").replace(/\n/g," ")});a.push(f.join("	"))}let g=a.join(`
`);return navigator.clipboard.writeText(g).then(()=>{console.log("[Clipboard] Copied to clipboard!"),o&&o.emit&&o.emit("clipboard:copy",{count:r.length,text:g})}).catch(s=>{console.error("[Clipboard] Failed to copy:",s)}),!0}function w(){navigator.clipboard.readText().then(t=>{if(!t||!t.trim()){console.log("[Clipboard] Nothing to paste");return}let d=e.getState().columns||[],r=t.trim().split(`
`),a=[],g=0,s=r[0].split("	");d.every((i,y)=>{let p=i.header||i.id;return s[y]&&s[y].trim().toLowerCase()===p.toLowerCase()})&&(g=1,console.log("[Clipboard] Detected header row, skipping"));for(let i=g;i<r.length;i++){let y=r[i].split("	"),p={};d.forEach((C,x)=>{let A=C.field||C.id,c=y[x]||"";if(C.type==="number"){let k=parseFloat(c.replace(/,/g,""));c=isNaN(k)?0:k}else C.type==="boolean"&&(c=c.toLowerCase()==="true"||c==="1"||c==="\u2713");p[A]=c}),p.id||(p.id=`pasted_${Date.now()}_${i}`),a.push(p)}if(console.log("[Clipboard] Parsed rows to paste:",a.length),a.length===0){console.log("[Clipboard] No valid rows to paste");return}let h=[...e.getData?e.getData():[],...a];e.setData&&(e.setData(h),console.log("[Clipboard] Added",a.length,"rows to table")),o&&o.emit&&o.emit("clipboard:paste",{rows:a,count:a.length,text:t})}).catch(t=>{console.error("[Clipboard] Failed to paste:",t)})}return l.shortcuts&&(m=t=>{if(!(navigator.platform.toUpperCase().indexOf("MAC")>=0?t.metaKey:t.ctrlKey))return;let r=t.key.toLowerCase();if(r==="c"&&!t.shiftKey){t.preventDefault(),t.stopPropagation(),console.log("[Clipboard] Copy triggered"),u(!0);return}if(r==="v"&&!t.shiftKey){if(t.target.matches("input, textarea, select, [contenteditable]"))return;t.preventDefault(),t.stopPropagation(),console.log("[Clipboard] Paste triggered"),w();return}},document.addEventListener("keydown",m,!0)),e.copy=u,e.paste=w,e.copyAll=()=>u(!1),{name:"clipboard",copy:u,paste:w,copyAll:()=>u(!1),destroy(){m&&document.removeEventListener("keydown",m,!0),delete e.copy,delete e.paste,delete e.copyAll}}}};return K(H);})();
BWClipboard=BWClipboard.ClipboardPlugin;
