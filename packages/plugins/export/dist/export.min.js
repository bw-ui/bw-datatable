var BWExport=(()=>{var m=Object.defineProperty;var C=Object.getOwnPropertyDescriptor;var v=Object.getOwnPropertyNames;var P=Object.prototype.hasOwnProperty;var N=(l,e)=>{for(var t in e)m(l,t,{get:e[t],enumerable:!0})},F=(l,e,t,g)=>{if(e&&typeof e=="object"||typeof e=="function")for(let s of v(e))!P.call(l,s)&&s!==t&&m(l,s,{get:()=>e[s],enumerable:!(g=C(e,s))||g.enumerable});return l};var L=l=>F(m({},"__esModule",{value:!0}),l);var U={};N(U,{ExportPlugin:()=>h,default:()=>h});var T={filename:"export",includeHeaders:!0,selectedOnly:!1},h={name:"export",init(l){let{eventBus:e,table:t,options:g}=l;if(!t){console.error("ExportPlugin: table is undefined");return}let s={...T,...g};function x(o=!1){return o?t.getSelected?t.getSelected():[]:t.getFilteredData?t.getFilteredData():[]}function y(){return t.getState().columns||[]}function b(o,n,r){let a=new Blob([o],{type:r}),i=URL.createObjectURL(a),c=document.createElement("a");c.href=i,c.download=n,c.style.display="none",document.body.appendChild(c),c.click(),document.body.removeChild(c),URL.revokeObjectURL(i)}function S(o){if(o==null)return"";let n=String(o);return n.includes(",")||n.includes(`
`)||n.includes('"')?`"${n.replace(/"/g,'""')}"`:n}function j(o={}){let n={...s,...o},r=x(n.selectedOnly),a=y();if(r.length===0)return console.warn("ExportPlugin: No data to export"),!1;let i=[];if(n.includeHeaders){let f=a.map(d=>S(d.header||d.id));i.push(f.join(","))}for(let f of r){let d=a.map(p=>{let O=f[p.field||p.id];return S(O)});i.push(d.join(","))}let c=i.join(`
`),u=`${n.filename}.csv`;return b(c,u,"text/csv;charset=utf-8;"),e&&e.emit&&e.emit("export:csv",{count:r.length,filename:u}),!0}function w(o={}){let n={...s,...o},r=x(n.selectedOnly);if(r.length===0)return console.warn("ExportPlugin: No data to export"),!1;let a=JSON.stringify(r,null,2),i=`${n.filename}.json`;return b(a,i,"application/json"),e&&e.emit&&e.emit("export:json",{count:r.length,filename:i}),!0}function E(o={}){let n={...s,...o},r=x(n.selectedOnly),a=y();if(r.length===0)return console.warn("ExportPlugin: No data to copy"),!1;let i=[];n.includeHeaders&&i.push(a.map(u=>u.header||u.id).join("	"));for(let u of r){let f=a.map(d=>{let p=u[d.field||d.id];return p==null?"":String(p)});i.push(f.join("	"))}let c=i.join(`
`);return navigator.clipboard.writeText(c).then(()=>{e&&e.emit&&e.emit("export:clipboard",{count:r.length})}).catch(u=>{console.error("ExportPlugin: Failed to copy",u)}),!0}return t.exportCSV=j,t.exportJSON=w,t.copyToClipboard=E,{name:"export",exportCSV:j,exportJSON:w,copyToClipboard:E,destroy(){delete t.exportCSV,delete t.exportJSON,delete t.copyToClipboard}}}};return L(U);})();
BWExport=BWExport.ExportPlugin;
